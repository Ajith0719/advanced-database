# 1. Stop any running mongod (if you started it manually)
pkill mongod

# 2. Remove the Ubuntu “mongodb” packages
sudo apt-get remove --purge -y mongodb mongodb-server mongodb-server-core

# 3. Clean up leftover dependencies
sudo apt-get autoremove -y

# 4. (Optional) Wipe old data/log directories if you don’t need them
sudo rm -rf /var/lib/mongodb /var/log/mongodb /data/db

Installing new MongoDB

# 1. Import the MongoDB public GPG key:
wget -qO - https://www.mongodb.org/static/pgp/server-7.0.asc | sudo apt-key add -

# 2. Add the MongoDB 7.0 repo (for Ubuntu 22.04 “jammy”—adjust if you’re on a different release):
echo "deb [ arch=amd64,arm64 ] https://repo.mongodb.org/apt/ubuntu focal/mongodb-org/7.0 multiverse" \
  | sudo tee /etc/apt/sources.list.d/mongodb-org-7.0.list

# 3. Update and install mongodb-org (this pulls in the latest 7.0.x packages):
sudo apt-get update
sudo apt-get install -y mongodb-org

# 4. (Re)create your data directory and give yourself ownership:
sudo mkdir -p /data/db
sudo chown -R "$(whoami)":"$(whoami)" /data/db

# 5. Start mongod manually (systemd isn’t available inside Codespaces):
mongod --dbpath /data/db --bind_ip_all --logpath /data/db/mongod.log --fork

# 6. Test the connection:
mongo --quiet --eval "db.runCommand({ ping: 1 })"